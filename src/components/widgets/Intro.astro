---
import { Image } from '@astrojs/image/components';
import ContentSection from '~/components/widgets/ContentSection.astro';

var bgPattern = `background-color: #ffffff;
background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23e1b7fe' fill-opacity='0.83' fill-rule='evenodd'/%3E%3C/svg%3E");`;

const classes = {
	fade: {
		start:
			'transition duration-[5000ms] ease-in-out w-full h-full object-cover object-top rounded-xl shadow-md shadow-gray-500 active',
		item: 'transition duration-[5000ms] ease-in-out absolute inset-0 w-full h-full object-cover object-top rounded-xl shadow-md shadow-gray-500 opacity-0',
	},
};

import a1 from '~/assets/images/intro/square_1.jpeg';
import a2 from '~/assets/images/intro/square_2.jpeg';
import a3 from '~/assets/images/intro/square_3.jpeg';

import b1 from '~/assets/images/intro/landscape_1.jpeg';
import b2 from '~/assets/images/intro/landscape_2.jpeg';
import b3 from '~/assets/images/intro/landscape_3.jpeg';

import c1 from '~/assets/images/intro/portrait_1.jpeg';
import c2 from '~/assets/images/intro/portrait_2.jpeg';
import c3 from '~/assets/images/intro/portrait_3.jpeg';
---

<ContentSection title="Welcome to Bluff's Little Thinkers" id="intro" pattern={bgPattern}>
	<div class="container m-auto space-y-4 md:space-y-8 md:px-6 lg:px-12">
		<div class="justify-center text-center gap-6 lg:flex lg:items-center lg:gap-16">
			<div class="order-last mb-6 space-y-4 md:space-y-6 md:mb-0 lg:w-6/12">
				<h1 class="text-4xl font-extrabold md:text-5xl bg-white/40 p-2 rounded-md">
					Learning Today, Leading Tomorrow.
				</h1>
				<p class="text-2xl font-extrabold bg-white/40 p-2 rounded-md">
					Located just off of I-29 in Sergeant Bluff, IA, our newly renovated 4,000-square-foot facility includes five
					age-appropriate classrooms, a sensory room for children with special and unique needs, and a brand-new
					age-appropriate playground.
				</p>
				<div class="flex flex-row md:flex-row-reverse flex-wrap justify-center gap-4 md:gap-6">
					<a
						href="#about"
						class="btn text-white tracking-wide bg-[#FF81A3] hover:text-gray-600 hover:bg-pink-300 active:bg-pink-500"
						>About BLT</a
					>
					<a
						href="/apply"
						class="md:order-first btn text-white tracking-wide text-lg font-extrabold bg-[#2E8E00] hover:text-gray-600 hover:bg-lime-200 active:bg-lime-500"
						>Join our Team!</a
					>
				</div>
				<div class="flex flex-row-reverse flex-wrap justify-center gap-4 md:gap-6">
					<a
						href="#prices"
						class="btn text-white tracking-wide bg-[#087BB8] hover:text-gray-600 hover:bg-blue-400 active:bg-blue-600"
						>Pricing</a
					>
					<a
						href="#faq"
						class="order-first btn text-white tracking-wide bg-[#321A81] hover:text-gray-600 hover:bg-purple-300 active:bg-purple-500"
						>FAQ</a
					>
				</div>
			</div>
			<div class="grid grid-cols-10 grid-rows-5 gap-4 mx-auto md:mt-8 md:w-10/12 lg:w-6/12">
				<!-- portrait photo -->
				<div id="portrait-photo" class="relative col-span-4 row-span-3 col-start-1 row-start-2">
					<Image
						src={c3}
						width={310}
						height={480}
						alt="bluffs little thinkers classroom"
						class={classes.fade.item}
					/>
					<Image
						src={c2}
						width={310}
						height={480}
						alt="bluffs little thinkers classroom"
						class={classes.fade.item}
					/>
					<Image
						src={c1}
						width={310}
						height={480}
						alt="bluffs little thinkers classroom"
						class={classes.fade.start}
					/>
				</div>
				<!-- square photo -->
				<div id="square-photo" class="relative col-span-4 row-span-2 col-start-6">
					<Image
						src={a3}
						width={280}
						height={280}
						alt="bluffs little thinkers classroom"
						class={classes.fade.item}
					/>
					<Image
						src={a2}
						width={280}
						height={280}
						alt="bluffs little thinkers classroom"
						class={classes.fade.item}
					/>
					<Image
						src={a1}
						width={280}
						height={280}
						alt="bluffs little thinkers classroom"
						class={classes.fade.start}
						data-visible
					/>
				</div>
				<!-- landscape photo -->
				<div id="landscape-photo" class="relative col-span-6 row-span-3">
					<Image src={b3} width={357} height={328} alt="bluffs little thinkers classroom" class={classes.fade.item} />
					<Image src={b2} width={357} height={328} alt="bluffs little thinkers classroom" class={classes.fade.item} />
					<Image src={b1} width={357} height={328} alt="bluffs little thinkers classroom" class={classes.fade.start} />
				</div>
			</div>
		</div>
	</div>
</ContentSection>

<script>
	function randomTimeout() {
		/* return Math.floor(Math.random() * (max - min + 1) + min) */
		const items = [1000, 1800, 2500, 3000, 3700];
		return items[Math.floor(Math.random() * items.length)] + 4000;
	}

	function photoFade(el) {
		let curIndex = 0;
		let children = el.children;
		let stop = children.length - 1;
		let delay = 0;

		function fade() {
			setTimeout(function () {
				children[curIndex].classList.add('opacity-0');

				if (curIndex == stop) {
					children[0].classList.remove('opacity-0');
				} else {
					children[curIndex + 1].classList.remove('opacity-0');
				}

				if (curIndex == stop) {
					curIndex = 0;
					delay = 15000;
				} else {
					curIndex++;
				}

				fade();
			}, delay);
		}
		fade();
	}

	/* function photoFade(el) {
		let curIndex = 0;
		let children = el.children;
		let stop = children.length - 1;

		function fade() {
			setTimeout(function () {
				if (curIndex == stop) {
					curIndex = 0;
				} else {
					curIndex++;
				}

				children[curIndex].classList.add('opacity-0');

				if (curIndex == stop) {
					children[0].classList.remove('opacity-0');
				} else {
					children[curIndex + 1].classList.remove('opacity-0');
				}
				fade();
			}, randomTimeout());
		}
		fade();
	} */

	(function () {
		const squareFader = document.getElementById('square-photo');
		const portraitFader = document.getElementById('portrait-photo');
		const landscapeFader = document.getElementById('landscape-photo');

		photoFade(squareFader);
		setTimeout(() => photoFade(landscapeFader), 5000);
		setTimeout(() => photoFade(portraitFader), 10000);
	})();
</script>
