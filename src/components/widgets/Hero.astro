---
import { Icon } from 'astro-icon';
import { Image } from '@astrojs/image/components';
import ToggleMenu from '~/components/core/ToggleMenu.astro';

import heroImage from '~/assets/images/hero_image.jpeg';
import twenty18 from '~/assets/images/awards/2018.png';
import twenty19 from '~/assets/images/awards/2019.png';
import twenty20 from '~/assets/images/awards/2020.png';
import twenty21 from '~/assets/images/awards/2021.png';
import twenty22 from '~/assets/images/awards/2022.png';
---

<header id="page-header" class="fixed z-20 flex-none mx-auto w-full">
	<div class="py-3 px-3 w-full lg:flex lg:justify-between lg:px-4">
		<div class="flex justify-between">
			<a id="brand" aria-label="logo" class="invisible items-center gap-3 flex" href="#">
				<h1 class="sr-only">Bluff's Little Thinkers</h1>
				<Icon name="icon" class="h-7 sm:hidden" />
				<Icon name="monogram" class="h-10 sm:hidden" />
				<Icon name="wordmark" class="hidden h-10 sm:block" />
			</a>
			<div class="flex items-center lg:hidden justify-self-end">
				<ToggleMenu />
			</div>
		</div>
		<nav
			class="bg-pink-200/30 backdrop-blur-md mt-6 lg:mt-0 lg:mb-0 rounded-md lg:bg-transparent lg:backdrop-blur-none lg:rounded-none lg:margin-0 items-center w-full lg:w-auto hidden lg:flex text-white text-lg font-semibold tracking-wide h-screen lg:h-auto"
			aria-label="Main navigation"
			id="menu"
		>
			<ul
				id="nav-items"
				class="flex flex-col items-center pt-8 lg:pt-0 lg:flex-row lg:self-center collapse w-full lg:w-auto collapsed"
			>
				<li>
					<a
						data-nav-link
						class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out"
						href="#facility">Facility</a
					>
				</li>
				<li>
					<a
						data-nav-link
						class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out"
						href="#prices"
						>Pricing
					</a>
				</li>
				<li>
					<a
						data-nav-link
						class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out"
						href="#faq">FAQ</a
					>
				</li>
				<li>
					<a
						data-nav-link
						class="font-medium hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out"
						href="#contact">Contact</a
					>
				</li>
				<li class="lg:hidden">
					<a
						class="font-bold hover:text-gray-900 dark:hover:text-white px-4 py-3 flex items-center transition duration-150 ease-in-out"
						href="https://www.facebook.com/bluffsthinkers/"
						target="_blank"
					>
						<Icon name="tabler:brand-facebook" class="w-5 h-5" />
						Facebook
					</a>
				</li>
			</ul>
			<div class="lg:self-center flex items-center mb-4 lg:mb-0 ml-2">
				<div class="hidden items-center lg:flex">
					<a
						href="https://www.facebook.com/bluffsthinkers/"
						target="_blank"
						class="inline-block focus:outline-none text-sm p-2.5 hover:text-gray-900"
						aria-label="Bluff's Little Thinkers Facebook"
					>
						<Icon name="openmoji:facebook" class="w-8 h-8" />
					</a>
				</div>
			</div>
		</nav>
	</div>
</header>
<section id="hero" class="relative min-h-screen">
	<Image src={heroImage} alt="bluffs little thinkers" class="absolute inset-0 w-full h-full object-cover object-top" />
	<div aria-hidden="true" class="absolute inset-0 w-full h-full bg-purple-400 bg-opacity-30 backdrop-blur-sm"></div>
	<div class="relative container m-auto px-6 md:px-12 lg:px-6">
		<div class="mb-12 pt-28 space-y-14 md:mb-16 md:pt-40 lg:w-8/12 lg:mx-auto">
			<div class="flex justify-center">
				<Icon name="logomark" class="h-44 md:h-64 lg:h-72" />
			</div>
			<div class="mb-2">
				<p class="text-lg md:text-2xl lg:text-3xl text-center font-bold text-white whitespace-nowrap">
					Learning Today, Leading Tomorrow.
				</p>
			</div>
		</div>

		<div class="pb-20">
			<div class="m-auto mt-8 md:w-11/12 lg:w-8/12 xl:w-7/12">
				<div class="flex flex-wrap justify-center gap-6">
					<div class="flex items-center">
						<Image src={twenty18} width={85} alt="best in siouxland 2018" />
					</div>
					<div class="flex items-center">
						<Image src={twenty19} width={85} alt="best in siouxland 2019" />
					</div>
					<div class="flex items-center">
						<Image src={twenty20} width={85} alt="best in siouxland 2020" />
					</div>
					<div class="flex items-center">
						<Image src={twenty21} width={85} alt="best in siouxland 2021" />
					</div>
					<div class="flex items-center">
						<Image src={twenty22} width={85} alt="best in siouxland 2022" />
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<script>
	const header: HTMLElement = document.getElementById('page-header');
	const nav: HTMLElement = document.getElementById('menu');
	const menuToggle: HTMLElement = document.getElementById('menu-toggle');
	const brand: HTMLElement = document.getElementById('brand');
	const hero: HTMLElement = document.getElementById('hero');
	const page = document.documentElement;
	const navLinks = document.querySelectorAll('[data-nav-link]');
	const navToggle = document.querySelectorAll('[data-aw-toggle-menu]');

	document.addEventListener('scroll', () => {
		const d = hero.offsetHeight - (page.scrollTop + header.offsetHeight);

		if (d < 0) {
			brand.classList.add('visible');
			brand.classList.remove('invisible');
			header.classList.add('backdrop-blur-md', 'bg-white/30', 'border-b', 'border-white');
			nav.classList.remove('text-white');
			nav.classList.add('text-[#321A81]');
			menuToggle.classList.remove('text-white');
			menuToggle.classList.add('text-[#321A81]');
		} else {
			brand.classList.add('invisible');
			brand.classList.remove('visible');
			header.classList.remove('backdrop-blur-md', 'bg-white/30', 'border-b', 'border-white');
			nav.classList.remove('text-[#321A81]');
			nav.classList.add('text-white');
			menuToggle.classList.remove('text-[#321A81]');
			menuToggle.classList.add('text-white');
		}
	});

	navLinks.forEach(function(elem) {
    elem.addEventListener("click", function() {
        if (!nav.classList.contains('hidden')){
					navToggle.forEach((elem) => {
						elem.classList.toggle('expanded');
					});
					nav.classList.toggle('hidden');
				}
    });
	});
</script>
